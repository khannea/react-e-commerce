(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{371:function(e,a,t){e.exports=t(765)},604:function(e,a,t){},765:function(e,a,t){"use strict";t.r(a);t(223),t(380),t(420);var n=t(0),r=t.n(n),i=t(20),l=t.n(i),c=(t(604),t(81)),o=t(32),s=t(50),m=t.n(s);function u(){return{type:"auth_user",payload:m.a.get("".concat("/api/users","/auth")).then((function(e){return e.data}))}}var d=t(49),p=function(e,a){arguments.length>2&&void 0!==arguments[2]&&arguments[2];function t(t){var i=Object(d.c)((function(e){return e.user})),l=Object(d.b)(),s=Object(n.useState)(!1),m=Object(o.a)(s,2),p=m[0],E=m[1],h=Object(n.useState)(!0),f=Object(o.a)(h,2),g=f[0],v=f[1];if(Object(n.useEffect)((function(){l(u()).then((function(e){if(console.log(e),!0!==e.payload.isAuth)throw E(!0),v(!1),new Error(e.error);E(!1),v(!1)})).catch((function(e){E(!0),v(!1)}))}),[E,v]),a){if(g)return null;if(!0===p)return r.a.createElement(c.a,{to:"/login"})}return r.a.createElement(e,Object.assign({},t,{user:i}))}return t},E=t(793),h=t(768),f=t(807),g=t(799),v=t(794),b=t(796),w=t(798),y=t(797),O=t(349);t(630);var j=function(e){var a=e.images;return r.a.createElement(f.a,{style:{overflow:"hidden",height:"200px",width:"100%"}},r.a.createElement(O.Carousel,{autoPlay:!0,infiniteLoop:!0,swipeable:!0,useKeyboardArrows:!0,showArrows:!0,showStatus:!1,emulateTouch:!0},a.map((function(e,a){return r.a.createElement("img",{src:"http://localhost:5000/".concat(e),style:{width:"100%"},key:e})}))))},x=Object(E.a)((function(){return{cardContainer:{justifyContent:"center"},productCard:{height:"380px"}}}));var S=function(){var e=x(),a=Object(n.useState)([]),t=Object(o.a)(a,2),i=t[0],l=t[1],c=Object(n.useState)(0),s=Object(o.a)(c,2),u=s[0],d=s[1],p=Object(n.useState)(6),E=Object(o.a)(p,2),O=E[0],S=(E[1],Object(n.useState)(0)),k=Object(o.a)(S,2),C=k[0],N=k[1];Object(n.useEffect)((function(){P({skip:u,limit:O})}),[]);var P=function(e){m.a.post("/api/product/getProducts",e).then((function(e){e.data.success?(l(i.concat(e.data.products)),N(e.data.postSize)):alert("Failed to get products informations")}))},_=i.map((function(a,t){return r.a.createElement(v.a,{item:!0,key:t,xs:12,sm:6,md:4,lg:3,xl:2},r.a.createElement(b.a,{className:e.productCard},r.a.createElement(j,{images:a.images}),r.a.createElement(y.a,{style:{height:"100%"}},r.a.createElement(w.a,{style:{height:"100%"}},r.a.createElement(v.a,{container:!0,direction:"column",spacing:3},r.a.createElement(v.a,{item:!0},r.a.createElement(h.a,{variant:"h5"},r.a.createElement(f.a,{fontWeight:900},a.price,"\u20ac"))),r.a.createElement(v.a,{item:!0},r.a.createElement(h.a,{variant:"h6"},a.country)))))))}));return r.a.createElement(f.a,{m:4,justifyItems:"center"},r.a.createElement(v.a,{container:!0,direction:"column",alignItems:"center",spacing:4},r.a.createElement(v.a,{container:!0,item:!0,spacing:4,className:e.cardContainer},_),C>=O&&r.a.createElement("div",null,r.a.createElement(g.a,{variant:"outlined",size:"large",onClick:function(){P({skip:u+O,limit:O}),d(u+O)}},"More"))))},k=t(165),C=t(56),N=t(800),P=t(364),_=t(806);var I=Object(c.g)((function(e){var a=Object(d.b)(),t=Object(n.useState)(""),i=Object(o.a)(t,2),l=i[0],c=i[1];return r.a.createElement(k.a,{initialValues:{email:"",password:""},validationSchema:C.object().shape({email:C.string().email("Email is invalid").required("Email is required"),password:C.string().min(6,"Password must be at least 6 characters").required("Password is required")}),onSubmit:function(t,n){var r=n.setSubmitting;setTimeout((function(){var n={email:t.email,password:t.password};a(function(e){return{type:"login_user",payload:m.a.post("".concat("/api/users","/login"),e).then((function(e){return e.data}))}}(n)).then((function(a){a.payload.loginSuccess?e.history.push("/"):c("Check out your Account or Password again")})).catch((function(e){c("Check out your Account or Password again"),setTimeout((function(){c("")}),3e3)})),r(!1)}),500)}},(function(e){var a=e.values,t=e.touched,n=e.errors,i=e.isSubmitting,c=e.handleChange,o=e.handleSubmit;return r.a.createElement(N.a,null,r.a.createElement(P.a,null,r.a.createElement(f.a,{p:10},r.a.createElement("form",{style:{minWidth:"375px"},onSubmit:o},r.a.createElement(v.a,{container:!0,direction:"column",spacing:3},r.a.createElement(v.a,{item:!0},r.a.createElement(h.a,{variant:"h2"},"Sign up")),r.a.createElement(v.a,{item:!0},r.a.createElement(_.a,{fullWidth:!0,variant:"outlined",id:"email",label:"Email",placeholder:"Enter your Email.",type:"email",value:a.email,onChange:c,className:n.email&&t.email?"text-input error":"text-input"})),r.a.createElement(v.a,{item:!0},n.email&&t.email&&r.a.createElement("div",{className:"input-feedback"},n.email)),r.a.createElement(v.a,{item:!0},l&&r.a.createElement("label",null,r.a.createElement("p",{style:{color:"#ff0000bf",fontSize:"0.7rem",border:"1px solid",padding:"1rem",borderRadius:"10px"}},l))),r.a.createElement(v.a,{item:!0},r.a.createElement(_.a,{fullWidth:!0,variant:"outlined",id:"password",placeholder:"Enter your password, at least 6 characters.",label:"Password",type:"password",value:a.password,onChange:c,className:n.password&&t.password?"text-input error":"text-input"})),r.a.createElement(v.a,{item:!0},n.password&&t.password&&r.a.createElement("div",{className:"input-feedback"},n.password)),r.a.createElement(v.a,{item:!0},r.a.createElement(g.a,{variant:"contained",onClick:o,color:"primary",disabled:i},"Login")))))))}))})),F=t(356),D=t.n(F);var T=function(e){var a=Object(d.b)();return r.a.createElement(k.a,{initialValues:{email:"",lastName:"",name:"",password:"",confirmPassword:""},validationSchema:C.object().shape({name:C.string().required("Name is required"),lastName:C.string().required("Last Name is required"),email:C.string().email("Email is invalid").required("Email is required"),password:C.string().min(6,"Password must be at least 6 characters").required("Password is required"),confirmPassword:C.string().oneOf([C.ref("password"),null],"Passwords must match").required("Confirm Password is required")}),onSubmit:function(t,n){var r=n.setSubmitting;setTimeout((function(){var n={email:t.email,password:t.password,name:t.name,lastname:t.lastname,image:"http://gravatar.com/avatar/".concat(D()().unix(),"?d=identicon")};a(function(e){return{type:"register_user",payload:m.a.post("".concat("/api/users","/register"),e).then((function(e){return e.data}))}}(n)).then((function(a){a.payload.success?e.history.push("/login"):alert(a.payload.err.errmsg)})),r(!1)}),500)}},(function(e){var a=e.values,t=e.touched,n=e.errors,i=e.isSubmitting,l=e.handleChange,c=e.handleSubmit;return r.a.createElement(N.a,null,r.a.createElement(P.a,null,r.a.createElement(f.a,{p:10},r.a.createElement("form",{style:{minWidth:"375px"},onSubmit:c},r.a.createElement(v.a,{container:!0,direction:"column",spacing:3},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(h.a,{variant:"h2"},"Sign up")),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(_.a,{fullWidth:!0,variant:"outlined",id:"name",placeholder:"Enter your name.",label:"Name",type:"text",value:a.name,onChange:l,className:n.name&&t.name?"text-input error":"text-input"})),r.a.createElement(v.a,{item:!0},n.name&&t.name&&r.a.createElement("div",{className:"input-feedback"},n.name)),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(_.a,{fullWidth:!0,variant:"outlined",id:"lastName",label:"Lastame",placeholder:"Enter your Last Name.",type:"text",value:a.lastName,onChange:l,className:n.lastName&&t.lastName?"text-input error":"text-input"})),r.a.createElement(v.a,{item:!0},n.lastName&&t.lastName&&r.a.createElement("div",{className:"input-feedback"},n.lastName)),r.a.createElement(v.a,{item:!0},r.a.createElement(_.a,{fullWidth:!0,variant:"outlined",id:"email",label:"Email",placeholder:"Enter your Email.",type:"email",value:a.email,onChange:l,className:n.email&&t.email?"text-input error":"text-input"})),r.a.createElement(v.a,{item:!0},n.email&&t.email&&r.a.createElement("div",{className:"input-feedback"},n.email)),r.a.createElement(v.a,{item:!0},r.a.createElement(_.a,{fullWidth:!0,variant:"outlined",id:"password",placeholder:"Enter your password, at least 6 characters.",label:"Password",type:"password",value:a.password,onChange:l,className:n.password&&t.password?"text-input error":"text-input"})),r.a.createElement(v.a,{item:!0},n.password&&t.password&&r.a.createElement("div",{className:"input-feedback"},n.password)),r.a.createElement(v.a,{item:!0},r.a.createElement(_.a,{fullWidth:!0,variant:"outlined",id:"confirmPassword",placeholder:"Confirm your password.",type:"password",value:a.confirmPassword,onChange:l,label:"Confirm password",className:n.confirmPassword&&t.confirmPassword?"text-input error":"text-input"})),r.a.createElement(v.a,{item:!0},n.confirmPassword&&t.confirmPassword&&r.a.createElement("div",{className:"input-feedback"},n.confirmPassword)),r.a.createElement(v.a,{item:!0},r.a.createElement(g.a,{variant:"contained",onClick:c,color:"primary",disabled:i},"Submit")))))))}))},W=t(53);var q=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{item:!0,container:!0,alignContent:"space-between",alignItems:"center",direction:"row",spacing:2},r.a.createElement(v.a,{item:!0},r.a.createElement(g.a,{component:W.b,to:"/"},r.a.createElement(h.a,{variant:"h5"},"Logo"))),r.a.createElement(v.a,{item:!0},r.a.createElement(g.a,{component:W.b,to:"/home"},r.a.createElement(h.a,{variant:"h5"},"Home")))))},L=t(357),A=t.n(L),z=t(801);var U=Object(c.g)((function(e){var a=Object(d.b)(),t=Object(d.c)((function(e){return e.user}));return r.a.createElement(r.a.Fragment,null,t.userData&&t.userData.isAuth&&r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{item:!0,container:!0,alignContent:"space-between",alignItems:"center",direction:"row",spacing:2},r.a.createElement(v.a,{item:!0},r.a.createElement(z.a,{component:W.b,to:"/product/upload"},r.a.createElement(A.a,{fontSize:"large"}))),r.a.createElement(v.a,{item:!0},r.a.createElement(g.a,{onClick:function(){m.a.get("".concat("/api/users","/logout")).then((function(t){200===t.status?(a({type:"logout_user",payload:m.a.get("".concat("/api/users","/logout")).then((function(e){return e.data}))}).then((function(a){window.localStorage.setItem("userId",void 0),e.history.push("/login")})),localStorage.clear(),e.history.push("/login")):alert("Log Out Failed")}))}},r.a.createElement(h.a,{variant:"h5"},"Logout"))))),(!t.userData||!t.userData.isAuth)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{item:!0,container:!0,alignContent:"space-between",alignItems:"center",direction:"row",spacing:2},r.a.createElement(v.a,{item:!0},r.a.createElement(g.a,{component:W.b,to:"/login"},r.a.createElement(h.a,{variant:"h5"},"Sign In"))),r.a.createElement(v.a,{item:!0},r.a.createElement(g.a,{component:W.b,to:"/register"},r.a.createElement(h.a,{variant:"h5"},"Sign Up"))))))})),V=t(802),X=t(803);var R=function(){return r.a.createElement(V.a,{position:"fixed"},r.a.createElement(X.a,null,r.a.createElement(v.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(v.a,{item:!0},r.a.createElement(q,null)),r.a.createElement(v.a,{item:!0},r.a.createElement(U,null)))))},B=t(804),J=t(167),K=t(363),M=t(359),H=t.n(M);var $=function(e){var a=Object(n.useState)([]),t=Object(o.a)(a,2),i=t[0],l=t[1];return r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(K.a,{onDrop:function(a){var t=new FormData;t.append("file",a[0]),m.a.post("/api/product/uploadImage",t,{header:{"content-type":"multipart/form-data"}}).then((function(a){a.data.success?(l([].concat(Object(J.a)(i),[a.data.image])),e.refreshFunction([].concat(Object(J.a)(i),[a.data.image]))):alert("Failed to save the Image in Server")}))},multiple:!1,maxSize:8e8},(function(e){var a=e.getRootProps,t=e.getInputProps;return r.a.createElement("div",Object.assign({style:{width:"300px",height:"240px",border:"1px solid lightgray",display:"flex",alignItems:"center",justifyContent:"center"}},a()),r.a.createElement("input",t()),r.a.createElement(H.a,null))})),r.a.createElement("div",{style:{display:"flex",width:"300px",height:"280px",overflowX:"auto"}},i.map((function(a,t){return r.a.createElement("div",{key:t,onClick:function(){return function(a){var t=i.indexOf(a),n=Object(J.a)(i);n.splice(t,1),l(n),e.refreshFunction(n)}(a)}},r.a.createElement("img",{style:{minWidth:"300px",width:"300px",height:"240px"},src:"http://localhost:5000/".concat(a),alt:"productImg-".concat(t)}))}))))};var G=function(e){var a=Object(n.useState)(""),t=Object(o.a)(a,2),i=t[0],l=t[1],c=Object(n.useState)(""),s=Object(o.a)(c,2),u=s[0],d=s[1],p=Object(n.useState)(""),E=Object(o.a)(p,2),f=E[0],b=E[1],w=Object(n.useState)("France"),y=Object(o.a)(w,2),O=y[0],j=y[1],x=Object(n.useState)([]),S=Object(o.a)(x,2),k=S[0],C=S[1],P=function(a){if(a.preventDefault(),e.user.userData._id&&i&&u&&f&&k&&O){var t={writer:e.user.userData._id,title:i,description:u,price:f,images:k,country:O};m.a.post("/api/product/uploadProduct",t).then((function(e){e.data.success?alert("Product successfullt uploaded"):alert("Failed to upload product")}))}else alert("First complete all fields!")};return r.a.createElement(N.a,null,r.a.createElement("form",{onSubmit:P},r.a.createElement(v.a,{container:!0,direction:"column",spacing:4},r.a.createElement(v.a,{item:!0},r.a.createElement(h.a,{variant:"h2"},"Upload product")),r.a.createElement(v.a,{item:!0},r.a.createElement($,{refreshFunction:function(e){C(e)}})),r.a.createElement(v.a,{item:!0},r.a.createElement(_.a,{label:"Titre",variant:"outlined",fullWidth:!0,onChange:function(e){l(e.currentTarget.value)}})),r.a.createElement(v.a,{item:!0},r.a.createElement(_.a,{label:"Description",variant:"outlined",fullWidth:!0,onChange:function(e){d(e.currentTarget.value)},multiline:!0,rows:2})),r.a.createElement(v.a,{item:!0},r.a.createElement(_.a,{label:"Price",onChange:function(e){b(e.currentTarget.value)},InputProps:{startAdornment:r.a.createElement(B.a,{position:"start"},"\u20ac")},variant:"outlined"})),r.a.createElement(v.a,{item:!0},r.a.createElement(_.a,{id:"standard-select-currency-native",select:!0,label:"Pays",defaultValue:"France",onChange:function(e){j(e.currentTarget.value)},SelectProps:{native:!0}},[{key:1,value:"Allemagne"},{key:2,value:"France"},{key:3,value:"Espagne"},{key:4,value:"Chine"},{key:5,value:"Indonesie"},{key:6,value:"Japon"},{key:7,value:"Br\xe9sil"},{key:8,value:"USA"},{key:9,value:"Kenya"},{key:10,value:"Canada"},{key:11,value:"Finland"},{key:12,value:"Madagascar"},{key:13,value:"Iran"}].map((function(e){return r.a.createElement("option",{key:e.key,value:e.value},e.value)})))),r.a.createElement(v.a,{item:!0},r.a.createElement(g.a,{variant:"contained",color:"primary",size:"large",onClick:P},r.a.createElement(h.a,{variant:"h5"},"Submit"))))))},Q=t(805),Y=t(362),Z=Object(Y.a)({typography:{button:{textTransform:"none"}}});var ee=function(){return r.a.createElement(Q.a,{theme:Z},r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(R,null),r.a.createElement("div",{style:{paddingTop:"69px"}},r.a.createElement(c.d,null,r.a.createElement(c.b,{exact:!0,path:"/",component:p(S,!0)}),r.a.createElement(c.b,{exact:!0,path:"/login",component:p(I,!1)}),r.a.createElement(c.b,{exact:!0,path:"/register",component:p(T,!1)}),r.a.createElement(c.b,{exact:!0,path:"/product/upload",component:p(G,!0)})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ae=t(93),te=t(128),ne=Object(ae.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"register_user":return Object(te.a)({},e,{register:a.payload});case"login_user":return Object(te.a)({},e,{loginSucces:a.payload});case"auth_user":return Object(te.a)({},e,{userData:a.payload});case"logout_user":return Object(te.a)({},e);default:return e}}}),re=t(360),ie=t.n(re),le=t(361),ce=Object(ae.a)(ie.a,le.a)(ae.d);l.a.render(r.a.createElement(d.a,{store:ce(ne,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())},r.a.createElement(W.a,null,r.a.createElement(ee,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[371,1,2]]]);
//# sourceMappingURL=main.a06f64a6.chunk.js.map